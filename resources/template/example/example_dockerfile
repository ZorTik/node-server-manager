# Optional arg JAVA_VERSION. This is here before FROM to dynamically change the base image.
ARG JAVA_VERSION

# Use args down there.
FROM eclipse-temurin:$JAVA_VERSION

# Don't change this!
WORKDIR /data
COPY . .

# Built-in args. Don't change.
ARG SERVICE_ID
ARG SERVICE_PORT
ARG SERVICE_PORTS
ARG SERVICE_RAM
ARG SERVICE_CPU
ARG SERVICE_DISK

# Optional ones. From settings.yml
ARG STARTUP_FILE

ADD https://api.papermc.io/v2/projects/paper/versions/1.12.2/builds/1620/downloads/paper-1.12.2-1620.jar $STARTUP_FILE

# port1 port2 port3
EXPOSE $SERVICE_PORTS

CMD /bin/sh -c "java -Xmx$SERVICE_RAM -Dcom.mojang.eula.agree=true -jar $STARTUP_FILE --port=$SERVICE_PORT"